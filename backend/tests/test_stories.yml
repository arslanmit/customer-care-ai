version: "3.1"
stories:
  - story: Greeting and Goodbye test
    steps:
      - user: |
          hello
        intent: greet
      - action: utter_greet
      - user: |
          bye
        intent: goodbye
      - action: utter_goodbye

  - story: Order status inquiry with order number
    steps:
      - user: |
          I want to check my order status
        intent: check_order_status
      - action: action_ask_order_number
      - user: |
          My order number is ABC123
        intent: provide_order_number
        entities:
          - order_number: ABC123
      - action: action_check_order_status
      - action: utter_order_status

  - story: Multiple intents with context
    steps:
      - user: |
          Hi there
        intent: greet
      - action: utter_greet
      - user: |
          I need help with my order
        intent: need_help
      - action: action_ask_how_can_i_help
      - user: |
          I want to return an item
        intent: return_item
      - action: action_ask_order_number
      - user: |
          Never mind, I'll contact support
        intent: contact_support
      - action: utter_contact_support

  - story: Language preference change
    steps:
      - user: |
          Change language to Spanish
        intent: change_language
        entities:
          - language: es
      - action: action_set_language
      - action: utter_language_changed

  - story: Complex order inquiry with interruptions
    steps:
      - user: |
          I want to check my order
        intent: check_order_status
      - action: action_ask_order_number
      - user: |
          Wait, first tell me about your return policy
        intent: ask_return_policy
      - action: utter_return_policy
      - user: |
          Thanks, now about my order
        intent: check_order_status
      - action: action_ask_order_number
      - user: |
          The order number is XYZ789
        intent: provide_order_number
        entities:
          - order_number: XYZ789
      - action: action_check_order_status
      - action: utter_order_status

  - story: Fallback and recovery
    steps:
      - user: |
          asdfghjkl
        intent: nlu_fallback
      - action: action_default_fallback
      - user: |
          I meant to ask about my order
        intent: check_order_status
      - action: action_ask_order_number
      - user: |
          Order 12345
        intent: provide_order_number
        entities:
          - order_number: "12345"
      - action: action_check_order_status
      - action: utter_order_status
